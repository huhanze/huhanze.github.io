<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>è·å–è®¾å¤‡é€šè®¯å½•-iOS | Dylan.Hu&#39;Memory</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="iOS" />
    
    <meta name="description" content="iOSè·å–è®¾å¤‡é€šè®¯å½•æœ‰æ—¶å€™ä¸ºäº†é¡¹ç›®çš„æ¨å¹¿ï¼Œé€šè¿‡è·å–è®¾å¤‡çš„é€šè®¯å½•æ˜¯ä¸€ç§ä¸é”™çš„æ‰‹æ®µï¼Œé‚£ä¹ˆä¸‹é¢å°±ä»‹ç»iOSè®¾å¤‡æ€ä¹ˆè·å–é€šè®¯å½•ã€‚ åœ¨AddressBook.Frameworkä¸­ï¼Œè‹¹æœæä¾›äº†ç›¸å…³APIï¼Œæ­¤APIæ˜¯çº¯Cè¯­è¨€çš„ï¼Œæ‰€ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬äººç®€å•å°è£…ä¸€ä¸ªç±»ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ç”¨æ¥è·å–é€šè®¯å½•æ•°æ®ã€‚ è¿™é‡Œæˆ‘å°±å®šä¹‰ä¸ºHHBGetContactç±» 12345678910@interface HHBGetContact">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="è·å–è®¾å¤‡é€šè®¯å½•-iOS">
<meta property="og:url" content="http://yoursite.com/2015/10/13/technology/è·å–è®¾å¤‡é€šè®¯å½•-iOS/index.html">
<meta property="og:site_name" content="Dylan.Hu&#39;Memory">
<meta property="og:description" content="iOSè·å–è®¾å¤‡é€šè®¯å½•æœ‰æ—¶å€™ä¸ºäº†é¡¹ç›®çš„æ¨å¹¿ï¼Œé€šè¿‡è·å–è®¾å¤‡çš„é€šè®¯å½•æ˜¯ä¸€ç§ä¸é”™çš„æ‰‹æ®µï¼Œé‚£ä¹ˆä¸‹é¢å°±ä»‹ç»iOSè®¾å¤‡æ€ä¹ˆè·å–é€šè®¯å½•ã€‚ åœ¨AddressBook.Frameworkä¸­ï¼Œè‹¹æœæä¾›äº†ç›¸å…³APIï¼Œæ­¤APIæ˜¯çº¯Cè¯­è¨€çš„ï¼Œæ‰€ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬äººç®€å•å°è£…ä¸€ä¸ªç±»ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ç”¨æ¥è·å–é€šè®¯å½•æ•°æ®ã€‚ è¿™é‡Œæˆ‘å°±å®šä¹‰ä¸ºHHBGetContactç±» 12345678910@interface HHBGetContact">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/logo/logo_tech_2.jpg">
<meta property="og:updated_time" content="2018-03-21T10:24:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è·å–è®¾å¤‡é€šè®¯å½•-iOS">
<meta name="twitter:description" content="iOSè·å–è®¾å¤‡é€šè®¯å½•æœ‰æ—¶å€™ä¸ºäº†é¡¹ç›®çš„æ¨å¹¿ï¼Œé€šè¿‡è·å–è®¾å¤‡çš„é€šè®¯å½•æ˜¯ä¸€ç§ä¸é”™çš„æ‰‹æ®µï¼Œé‚£ä¹ˆä¸‹é¢å°±ä»‹ç»iOSè®¾å¤‡æ€ä¹ˆè·å–é€šè®¯å½•ã€‚ åœ¨AddressBook.Frameworkä¸­ï¼Œè‹¹æœæä¾›äº†ç›¸å…³APIï¼Œæ­¤APIæ˜¯çº¯Cè¯­è¨€çš„ï¼Œæ‰€ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬äººç®€å•å°è£…ä¸€ä¸ªç±»ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ç”¨æ¥è·å–é€šè®¯å½•æ•°æ®ã€‚ è¿™é‡Œæˆ‘å°±å®šä¹‰ä¸ºHHBGetContactç±» 12345678910@interface HHBGetContact">
<meta name="twitter:image" content="http://yoursite.com/images/logo/logo_tech_2.jpg">
    

    
        <link rel="alternate" href="/" title="Dylan.Hu&#39;Memory" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">ä¸»é¡µ</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/technology/">æŠ€æœ¯</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/life/">ç”Ÿæ´»éšç¬”</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/others/">å…¶ä»–</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/technology/">æŠ€æœ¯</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-technology/è·å–è®¾å¤‡é€šè®¯å½•-iOS" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        è·å–è®¾å¤‡é€šè®¯å½•-iOS
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2015/10/13/technology/è·å–è®¾å¤‡é€šè®¯å½•-iOS/" class="article-date">
    <time datetime="2015-10-13T08:42:31.000Z" itemprop="datePublished">2015-10-13</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <h4 id="iOSè·å–è®¾å¤‡é€šè®¯å½•"><a href="#iOSè·å–è®¾å¤‡é€šè®¯å½•" class="headerlink" title="iOSè·å–è®¾å¤‡é€šè®¯å½•"></a>iOSè·å–è®¾å¤‡é€šè®¯å½•</h4><p>æœ‰æ—¶å€™ä¸ºäº†é¡¹ç›®çš„æ¨å¹¿ï¼Œé€šè¿‡è·å–è®¾å¤‡çš„é€šè®¯å½•æ˜¯ä¸€ç§ä¸é”™çš„æ‰‹æ®µï¼Œé‚£ä¹ˆä¸‹é¢å°±ä»‹ç»iOSè®¾å¤‡æ€ä¹ˆè·å–é€šè®¯å½•ã€‚</p>
<p>åœ¨AddressBook.Frameworkä¸­ï¼Œè‹¹æœæä¾›äº†ç›¸å…³APIï¼Œæ­¤APIæ˜¯çº¯Cè¯­è¨€çš„ï¼Œæ‰€ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬äººç®€å•å°è£…ä¸€ä¸ªç±»ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ç”¨æ¥è·å–é€šè®¯å½•æ•°æ®ã€‚</p>
<p>è¿™é‡Œæˆ‘å°±å®šä¹‰ä¸º<font color="ff0079">HHBGetContact</font>ç±»</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HHBGetContact</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> è·å–æ‰‹æœºé€šè®¯å½•ä¿¡æ¯</div><div class="line"></div><div class="line"> @return é€šè®¯å½•é›†åˆ</div><div class="line"> */</div><div class="line">+ (<span class="built_in">NSArray</span> *)getAllcontactsOfPhone;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šä¸è¦å¿˜äº†å¼•å…¥<font color="ff0079">AddressBook/AddressBook.h</font>å¤´æ–‡ä»¶</p>
</blockquote>
<p>ä¸»è¦å®ç°çš„æ–¹æ³•</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">NSArray</span> *)getAllcontactsOfPhone&#123;</div><div class="line">    <span class="keyword">const</span> ABAddressBookRef *addressBooks = <span class="literal">nil</span>;</div><div class="line">    <span class="built_in">NSMutableArray</span> *contactM = [[<span class="built_in">NSMutableArray</span> alloc] init];</div><div class="line">    <span class="comment">// iOS6.0ä»¥ä¸Šç‰ˆæœ¬éœ€è¦å¼€å¯æƒé™</span></div><div class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIDevice</span> currentDevice].systemVersion floatValue] &gt;= <span class="number">6.0</span>) &#123;</div><div class="line">        addressBooks = ABAddressBookCreateWithOptions(<span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">        dispatch_semaphore_t sema = dispatch_semaphore_create(<span class="number">0</span>);</div><div class="line">        ABAddressBookRequestAccessWithCompletion(addressBooks, ^(<span class="keyword">bool</span> granted, <span class="built_in">CFErrorRef</span> error) &#123;</div><div class="line">            dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        addressBooks = ABAddressBookCreate();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// è·å–é€šè®¯å½•ä¸­çš„æ‰€æœ‰äºº</span></div><div class="line">    <span class="built_in">CFArrayRef</span> allPeoples = ABAddressBookCopyArrayOfAllPeople(addressBooks);</div><div class="line">    </div><div class="line">    <span class="comment">// é€šè®¯å½•ä¸­äººæ•°</span></div><div class="line">    <span class="built_in">CFIndex</span> peopleCount = ABAddressBookGetPersonCount(addressBooks);</div><div class="line">    </div><div class="line">    <span class="comment">// éå†æ¯ä¸ªäººçš„ä¿¡æ¯</span></div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; peopleCount; i++)&#123;</div><div class="line">         <span class="built_in">NSMutableDictionary</span> *contactDict = [<span class="built_in">NSMutableDictionary</span> dictionary];</div><div class="line">        <span class="comment">// è·å–ä¸ªäºº</span></div><div class="line">        ABRecordRef person = <span class="built_in">CFArrayGetValueAtIndex</span>(allPeoples, i);</div><div class="line">        <span class="comment">// è·å–ä¸ªäººåå­—</span></div><div class="line">        <span class="built_in">CFTypeRef</span> abName = ABRecordCopyValue(person, kABPersonFirstNameProperty);</div><div class="line">        <span class="built_in">CFTypeRef</span> abLastName = ABRecordCopyValue(person, kABPersonLastNameProperty);</div><div class="line">        <span class="built_in">CFStringRef</span> abFullName = ABRecordCopyCompositeName(person);</div><div class="line">        <span class="built_in">NSString</span> *nameString = (__bridge <span class="built_in">NSString</span> *)abName;</div><div class="line">        <span class="built_in">NSString</span> *lastNameString = (__bridge <span class="built_in">NSString</span> *)abLastName;</div><div class="line">        <span class="built_in">NSString</span> *address = (__bridge <span class="built_in">NSString</span> *)ABRecordCopyValue(person, kABPersonAddressProperty);</div><div class="line">        <span class="comment">// ... è¿™é‡Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è·å–ç›¸åº”çš„ä¿¡æ¯</span></div><div class="line">        <span class="keyword">if</span> ((__bridge <span class="keyword">id</span>)abFullName != <span class="literal">nil</span>) &#123;</div><div class="line">            nameString = (__bridge <span class="built_in">NSString</span> *)abFullName;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> ((__bridge <span class="keyword">id</span>)abLastName != <span class="literal">nil</span>)</div><div class="line">            &#123;</div><div class="line">                nameString = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ %@"</span>, nameString, lastNameString];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">self</span>.name = nameString;</div><div class="line">        <span class="keyword">self</span>.recordID = (<span class="keyword">int</span>)ABRecordGetRecordID(person);</div><div class="line">        [contactDict setObject:<span class="keyword">self</span>.name forKey:<span class="string">@"name"</span>];</div><div class="line">        </div><div class="line">        ABPropertyID multiProperties[] = &#123;</div><div class="line">            kABPersonPhoneProperty,</div><div class="line">            kABPersonEmailProperty</div><div class="line">        &#125;;</div><div class="line">        <span class="built_in">NSInteger</span> multiPropertiesTotal = <span class="keyword">sizeof</span>(multiProperties) / <span class="keyword">sizeof</span>(ABPropertyID);</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">NSInteger</span> j = <span class="number">0</span>; j &lt; multiPropertiesTotal; j++) &#123;</div><div class="line">            ABPropertyID property = multiProperties[j];</div><div class="line">            ABMultiValueRef valuesRef = ABRecordCopyValue(person, property);</div><div class="line">            <span class="built_in">NSInteger</span> valuesCount = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span> (valuesRef != <span class="literal">nil</span>) &#123;</div><div class="line">                valuesCount = ABMultiValueGetCount(valuesRef);</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            <span class="keyword">if</span> (valuesCount == <span class="number">0</span>) &#123;</div><div class="line">                <span class="built_in">CFRelease</span>(valuesRef);</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// è·å–è”ç³»ç”µè¯å’Œemail</span></div><div class="line">            <span class="keyword">for</span> (<span class="built_in">NSInteger</span> k = <span class="number">0</span>; k &lt; valuesCount; k++) &#123;</div><div class="line">                <span class="built_in">CFTypeRef</span> value = ABMultiValueCopyValueAtIndex(valuesRef, k);</div><div class="line">                <span class="keyword">switch</span> (j) &#123;</div><div class="line">                    <span class="keyword">case</span> <span class="number">0</span>: &#123; <span class="comment">// è”ç³»ç”µè¯</span></div><div class="line">                        <span class="keyword">self</span>.telephoneNum = (__bridge <span class="built_in">NSString</span>*)value;</div><div class="line">                        [contactDict setObject:<span class="keyword">self</span>.telephoneNum forKey:<span class="string">@"telephoneNum"</span>];</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">case</span> <span class="number">1</span>: &#123;<span class="comment">// Email</span></div><div class="line">                        <span class="keyword">self</span>.email = (__bridge <span class="built_in">NSString</span>*)value;</div><div class="line">                        [contactDict setObject:<span class="keyword">self</span>.email forKey:<span class="string">@"email"</span>];</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="comment">// ... è¿™å„¿è§£æç›¸åº”çš„ä¿¡æ¯æ•°æ® </span></div><div class="line">                &#125;</div><div class="line">                <span class="built_in">CFRelease</span>(value);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">CFRelease</span>(valuesRef);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// å°†ä¸ªäººä¿¡æ¯æ·»åŠ åˆ°æ•°ç»„ä¸­</span></div><div class="line">        [contactM addObject:contactDict];</div><div class="line">        </div><div class="line">        <span class="comment">// é‡Šæ”¾ç›¸å…³æŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜ç©ºé—´, Cçš„APIéœ€è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜</span></div><div class="line">        <span class="keyword">if</span> (abName) <span class="built_in">CFRelease</span>(abName);</div><div class="line">        <span class="keyword">if</span> (abLastName) <span class="built_in">CFRelease</span>(abLastName);</div><div class="line">        <span class="keyword">if</span> (abFullName) <span class="built_in">CFRelease</span>(abFullName);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> contactM.copy;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„æ–¹æ³•å°±æ˜¯ç®€å•çš„ä»‹ç»ä¸‹è¿™ä¸ªæ€è·¯ï¼Œæƒ³æ·±å…¥ç ”ç©¶çš„è‡ªå·±å¯ä»¥ç»§ç»­è¶´â€¦â€¦</p>
<font color="ff0079" size="5">é—²æ‰¯ä¸€æ®µï¼š</font>

<font color="sky-blue">å½“ç„¶æ‹¿åˆ°äº†é€šè®¯å½•ï¼Œæœ‰äº›äº§å“å’Œè®¾è®¡ä¸ä¼šæ»¡è¶³ï¼Œéè¦è®©ä½ åšå‡ºä¸ªé€šè®¯å½•ç•Œé¢ï¼›èªæ˜çš„å‰ç«¯ç«¥é‹è¿™æ—¶å€™å¼€å§‹ç”©é”…äº†ï¼šæ•°æ®åˆ†ç±»å¯ä»¥è®©åå°æ¥æå•Šï¼Œæ˜¯å•Šï¼Œæ‰€æœ‰çš„æ•°æ®æ’åºã€åˆ†ç±»éƒ½å¯ä»¥è®©åç«¯æ¥æï¼Œæ¯•ç«Ÿå‰ç«¯å°±æ˜¯æ˜¾ç¤ºæ•°æ®çš„ä¹ˆï¼ŒğŸ˜†ğŸ˜†ğŸ˜†ï¼Œä½†å¹¶ä¸æ˜¯æ¯ä¸ªåç«¯å¼€å‘éƒ½æ˜¯é‚£ä¹ˆå¥½è¯´è¯çš„ï¼Œä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸æå‰ç«¯çš„æ¯”æåç«¯çš„çœ‹ä¸Šå»å¹´è½»å¥½å¤šå‘¢ï¼Ÿä½ æ‡‚å¾—ï¼ï¼ï¼ å“ˆå“ˆå“ˆå“ˆå“ˆ ï¼Œ æœ‰ç‚¹å°é‚ªæ¶ï¼Œå¼€ä¸ªç©ç¬‘ï¼Œå¸Œæœ›ç›¸å…³åç«¯å¸…é”…å¤§å¤§çœ‹åˆ°è¿™æ®µä¸è¦ä»‹æ„å“ˆï¼Œç”±äºé€šè®¯å½•çš„æ•°æ®éƒ½æ˜¯å­˜åœ¨ä¸ªäººæ‰‹æœºæœ¬åœ°çš„ï¼Œè¿™ä¸ªè¦æ˜¯è®©æœåŠ¡ç«¯æ¥æ’åºã€åˆ†ç±»å°±æœ‰äº›ç‰µå¼ºäº†å“ˆï¼Œæ‰€ä»¥æŸäº›åœºåˆè¿˜éœ€è¦å’±è‡ªå·±æ¥åšè¿™ä¸€éƒ¨åˆ†å·¥ä½œï¼Œä¸‹é¢å°±ç®€å•ä»‹ç»ä¸€ä¸‹æˆ‘çš„æ€è·¯ã€‚</font>

<blockquote>
<p>æ€è·¯ ï¼š</p>
<ol>
<li><font color="orange">é¦–å…ˆæ‹¿åˆ°çš„æ•°æ®é›†åˆå¹¶æ²¡æœ‰åˆ†ç±»ï¼Œåœ¨å¸å›½æ¯«æ— ç–‘é—®ï¼Œç»å¤§æ•°çš„é€šè®¯å½•è”ç³»äººéƒ½æ˜¯ä¸­æ–‡ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†æ€ä¹ˆå½’ç±»å‘¢ï¼Ÿå…¶å®å°±æ˜¯è®²å§“åè½¬åŒ–ä¸ºæ‹¼éŸ³ï¼Œç„¶åä»¥å§“çš„æ‹¼éŸ³çš„ç¬¬ä¸€ä¸ªå­—æ¯å½’ç±»ï¼Œå¦‚ï¼šâ€œå¼ ä¸‰â€ æ‹¼éŸ³æ˜¯zhangsanï¼Œé‚£ä¹ˆå°±å½’åˆ°â€Zâ€è¿™ä¸€ç±»ä¸­ã€‚</font>
</li>
<li><font color="orange">é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆå°†ä¸­æ–‡è½¬ä¸ºæ‹¼éŸ³ï¼Œå…¶å®è¿™ä¸ªä¸éš¾ï¼Œç³»ç»ŸAPIæä¾›ç›¸åº”çš„å‡½æ•°ï¼Œä¸‹è¾¹ä¼šè®²åˆ°ã€‚</font>
</li>
<li><font color="orange">æ•°æ®å½’ç±»åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å°†æ•°æ®æ’åºäº†ï¼Œè¿™æ—¶å€™ä¸Šè¾¹è½¬ä¸ºçš„æ‹¼éŸ³å°±æœ‰ç”¨äº†ï¼Œå¯ä»¥æ ¹æ®æ±‰è¯­æ‹¼éŸ³è¿›è¡Œæ’åºï¼Œæ’åºç®—æ³•å¯ä»¥è‡ªå·±å†™ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨ç³»ç»Ÿçš„APIï¼Œæˆ‘è¿™é‡Œå°±ç”¨ç³»ç»Ÿçš„å§ã€‚</font>
</li>
<li><font color="orange">åŸºæœ¬æ€è·¯å°±æ˜¯ä»¥ä¸Šä¸‰ç‚¹ï¼Œ</font><font color="ff0079">å¤šéŸ³å­—é—®é¢˜å¯ä»¥æ ¹æ®äº§å“çš„è§„åˆ™å•ç‹¬å¤„ç†</font>


</li>
</ol>
</blockquote>
<p>æ¥ä¸‹æ¥å°±ç®€å•æ¥å†™ä¸€ä¸ªè¿™æ ·æ¨¡å‹å·¥å…·</p>
<p>é¦–å…ˆï¼Œå°†æ±‰å­—è½¬ä¸ºæ‹¼éŸ³ï¼Œæˆ‘è¿™é‡Œå†™äº†ä¸€ä¸ªNSStringçš„åˆ†ç±»ï¼Œæ·»åŠ ä¸€ä¸ªpinyinStringå±æ€§ï¼Œç„¶ååœ¨.mæ–‡ä»¶ä¸­é‡å†™getterã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSString</span> (<span class="title">HHBPinyinString</span>)</span></div><div class="line"></div><div class="line"><span class="comment">/// å¦‚æœå­—ç¬¦ä¸²æ˜¯ä¸­æ–‡ä¼šè¢«è½¬ä¸ºç›¸åº”çš„æ‹¼éŸ³</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *pinyinString;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSString</span> (<span class="title">HHBPinyinString</span>)</span></div><div class="line"></div><div class="line">- (<span class="built_in">NSString</span> *)pinyinString &#123;</div><div class="line">    <span class="comment">// æ–­è¨€ï¼Œè¢«è½¬æ¢çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></div><div class="line">    <span class="built_in">NSAssert</span>([<span class="keyword">self</span> isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]], <span class="string">@"è¢«è½¬æ¢çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"</span>);</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> == <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSMutableString</span> *pinyin = [<span class="keyword">self</span> mutableCopy];</div><div class="line">    </div><div class="line">    <span class="comment">// æ­¤å‡½æ•°ä¼šå°†å½“å‰å¯¹è±¡è½¬ä¸ºæœ‰éŸ³èŠ‚çš„æ‹¼éŸ³</span></div><div class="line">    <span class="built_in">CFStringTransform</span>((__bridge <span class="built_in">CFMutableStringRef</span>)pinyin, <span class="literal">NULL</span>, kCFStringTransformMandarinLatin, <span class="literal">NO</span>);</div><div class="line">    </div><div class="line">    <span class="comment">// å»æ‰æ‹¼éŸ³çš„éŸ³èŠ‚</span></div><div class="line">    <span class="built_in">CFStringTransform</span>((__bridge <span class="built_in">CFMutableStringRef</span>)pinyin, <span class="literal">NULL</span>, kCFStringTransformStripDiacritics, <span class="literal">NO</span>);</div><div class="line">    <span class="keyword">return</span> pinyin;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>æ¥ç€ï¼Œå®šä¹‰ä¸€ä¸ªè”ç³»äººæ¨¡å‹ï¼Œæ¨¡å‹ä¸­å®šä¹‰ç›¸å…³çš„å±æ€§ï¼Œæˆ‘è¿™é‡Œå®šä¹‰äº†ç´¢å¼•(åˆ†ç±»éœ€è¦)ã€æ‹¼éŸ³(æ’åºéœ€è¦)ã€è”ç³»äººä¿¡æ¯(åŸå§‹æ•°æ®ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€è¦é…ç½®ç›¸åº”çš„æ•°æ®)ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HHBContactModel</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">/// å§“å</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</div><div class="line"></div><div class="line"><span class="comment">/// email</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *email;</div><div class="line"></div><div class="line"><span class="comment">/// è”ç³»ç”µè¯</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *telephoneNum;</div><div class="line"></div><div class="line"><span class="comment">/// ç´¢å¼•ï¼ˆWordçš„é¦–ä¸ªå¤§å†™å­—æ¯ï¼Œæˆ–è€…æ±‰è¯­æ‹¼éŸ³çš„é¦–ä¸ªå¤§å†™å­—æ¯ï¼‰</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *index;</div><div class="line"></div><div class="line"><span class="comment">/// æ‹¼éŸ³åç§°(è‹±æ–‡åç§°åˆ™ä¸ºå…¨éƒ¨è½¬æ¢æˆå°å†™çš„å­—ç¬¦ä¸²)</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *letterStr;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> å®ä¾‹å¯¹è±¡ä¾¿åˆ©æ„é€ å™¨</div><div class="line"></div><div class="line"> @param dictionary å•ä¸ªè”ç³»äººä¿¡æ¯</div><div class="line"> @return è”ç³»äººæ¨¡å‹å¯¹è±¡</div><div class="line"> */</div><div class="line">- (<span class="keyword">instancetype</span>)initWithDictionary:(<span class="built_in">NSDictionary</span> *)dictionary;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> ç±»ä¾¿åˆ©æ„é€ å™¨</div><div class="line"> </div><div class="line"> @param dictionary å•ä¸ªè”ç³»äººä¿¡æ¯</div><div class="line"> @return è”ç³»äººæ¨¡å‹å¯¹è±¡</div><div class="line"> */</div><div class="line">+ (<span class="keyword">instancetype</span>)contactModelWithWithDictionary:(<span class="built_in">NSDictionary</span> *)dictionary;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> è”ç³»äººæ•°æ®è½¬æ¨¡å‹æ•°æ®é›†åˆ</div><div class="line"></div><div class="line"> @param dataArray è”ç³»äººæ•°æ®é›†åˆ</div><div class="line"> @return è”ç³»äººæ¨¡å‹æ•°æ®é›†åˆ</div><div class="line"> */</div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactModel *&gt; *)contactModelsWithArray:(<span class="built_in">NSArray</span> *)dataArray;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HHBContactModel</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)initWithDictionary:(<span class="built_in">NSDictionary</span> *)dictionary &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</div><div class="line">        <span class="keyword">if</span> ([dictionary.allKeys containsObject:<span class="string">@"name"</span>]) &#123;</div><div class="line">            <span class="built_in">NSString</span> *word = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@"</span>,dictionary[<span class="string">@"name"</span>]];</div><div class="line">            _name = word;</div><div class="line">            _letterStr = word.pinyinString;</div><div class="line">            _index = [<span class="keyword">self</span>.letterStr.uppercaseString substringToIndex:<span class="number">1</span>];</div><div class="line">            <span class="keyword">char</span> tempIndex = [_index characterAtIndex:<span class="number">0</span>];</div><div class="line">            <span class="keyword">if</span> (!(tempIndex &gt;= <span class="string">'A'</span> &amp;&amp; tempIndex &lt;= <span class="string">'Z'</span>)) &#123;</div><div class="line">                _index = <span class="string">@"#"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> ([dictionary.allKeys containsObject:<span class="string">@"email"</span>]) &#123;</div><div class="line">            <span class="built_in">NSString</span> *email = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@"</span>,dictionary[<span class="string">@"email"</span>]];</div><div class="line">            _email = email;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> ([dictionary.allKeys containsObject:<span class="string">@"telephoneNum"</span>]) &#123;</div><div class="line">            <span class="built_in">NSString</span> *telephoneNum = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@"</span>,dictionary[<span class="string">@"telephoneNum"</span>]];</div><div class="line">            _telephoneNum = telephoneNum;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)contactModelWithWithDictionary:(<span class="built_in">NSDictionary</span> *)dictionary &#123;</div><div class="line">    <span class="keyword">return</span> [[<span class="keyword">self</span> alloc] initWithDictionary:dictionary];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactModel *&gt; *)contactModelsWithArray:(<span class="built_in">NSArray</span> *)dataArray &#123;</div><div class="line">    <span class="built_in">NSMutableArray</span> *modelArray = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">if</span> (dataArray.count) &#123;</div><div class="line">        modelArray = [<span class="built_in">NSMutableArray</span> arrayWithCapacity:dataArray.count];</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">NSDictionary</span> *dict <span class="keyword">in</span> dataArray) &#123;</div><div class="line">            HHBContactModel *model = [HHBContactModel contactModelWithWithDictionary:dict];</div><div class="line">            [modelArray addObject:model];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> modelArray.copy;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘è¿™é‡Œåˆå®šä¹‰ä¸€ä¸ªæ¨¡å‹æ¥é‡ç»„æœ€ç»ˆçš„æ•°æ®ï¼Œè¿™ä¸ªæ¨¡å‹å¯¹è±¡å°±åªåŒ…å«ä¸¤ä¸ªå±æ€§ç´¢å¼•å’Œç´¢å¼•å¯¹åº”çš„æ•°æ®é›†åˆã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HHBContactCategoryModel</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">/// ç´¢å¼•</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *index;</div><div class="line"></div><div class="line"><span class="comment">/// ç´¢å¼•å¯¹åº”çš„è”ç³»äººé›†åˆ</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSArray</span> &lt;HHBContactModel *&gt; *contactsArray;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> è”ç³»äººæ•°æ®è½¬åŒ–ä¸ºæ’åºåˆ†ç±»åçš„æ•°æ®æ¨¡å‹é›†åˆ</div><div class="line"></div><div class="line"> @param dataArray è”ç³»äººé›†åˆæ•°æ®</div><div class="line"> @return HHBContactCategoryModelå¯¹è±¡æ•°æ®é›†åˆ</div><div class="line"> */</div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactCategoryModel *&gt; *)contactsCategoryModesWithArray:(<span class="built_in">NSArray</span> *)dataArray;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> è·å–å½“å‰è®¾å¤‡æ’åºåˆ†ç±»åçš„æ•°æ®æ¨¡å‹é›†åˆ</div><div class="line"></div><div class="line"> @return HHBContactCategoryModelå¯¹è±¡æ•°æ®é›†åˆ</div><div class="line"> */</div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactCategoryModel *&gt; *)getContactsCategoryModel;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HHBContactCategoryModel</span>()</span></div><div class="line"></div><div class="line"><span class="comment">/// ç´¢å¼•</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *index;</div><div class="line"></div><div class="line"><span class="comment">/// ç´¢å¼•å¯¹åº”çš„å›½å®¶é›†åˆ</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSArray</span> &lt;HHBContactModel *&gt; *contactsArray;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HHBContactCategoryModel</span></span></div><div class="line"></div><div class="line"><span class="meta">#pragma mark - åˆ†ç±»æ’åºè”ç³»äººæ•°æ®</span></div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactCategoryModel *&gt; *)contactsCategoryModesWithArray:(<span class="built_in">NSArray</span> *)dataArray &#123;</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *dict = @&#123;&#125;.mutableCopy;</div><div class="line">    <span class="built_in">NSMutableArray</span> *indexArray = @[].mutableCopy;</div><div class="line">    <span class="built_in">NSMutableArray</span> *modelArray = @[].mutableCopy;</div><div class="line">    <span class="built_in">NSArray</span> *contactModelsArray = [HHBContactModel contactModelsWithArray:dataArray];</div><div class="line">    <span class="keyword">for</span> (HHBContactModel *model <span class="keyword">in</span> contactModelsArray) &#123;</div><div class="line">        <span class="keyword">if</span> ([indexArray containsObject:model.index]) &#123;</div><div class="line">            <span class="built_in">NSMutableArray</span> *tempArray = [[dict objectForKey:model.index] mutableCopy];</div><div class="line">            [tempArray addObject:model];</div><div class="line">            [dict setValue:tempArray.copy forKey:model.index];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            [indexArray addObject:model.index];</div><div class="line">            [dict setValue:@[model] forKey:model.index];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// å­—æ¯ç´¢å¼•æŒ‰å‡åºæ’åº</span></div><div class="line">    [indexArray sortUsingComparator:^<span class="built_in">NSComparisonResult</span>(<span class="built_in">NSString</span> *  _Nonnull obj1, <span class="built_in">NSString</span> *  _Nonnull obj2) &#123;</div><div class="line">        <span class="keyword">return</span> [obj1 compare:obj2];</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    <span class="comment">// å¦‚æœæœ‰ â€œ#â€ æ•°æ®åˆ™æ’å…¥åˆ°æœ€å</span></div><div class="line">    <span class="keyword">if</span> ([indexArray.firstObject isEqualToString:<span class="string">@"#"</span>]) &#123;</div><div class="line">        [indexArray removeObjectAtIndex:<span class="number">0</span>];</div><div class="line">        [indexArray addObject:<span class="string">@"#"</span>];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// ç»„è£…æˆæœ€ç»ˆæ•°æ®æ¨¡å‹</span></div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *index <span class="keyword">in</span> indexArray) &#123;</div><div class="line">        HHBContactCategoryModel *categoryModel = [[HHBContactCategoryModel alloc] init];</div><div class="line">        categoryModel.index = index;</div><div class="line">        <span class="built_in">NSMutableArray</span> *contactsArray = [[dict objectForKey:index] mutableCopy];</div><div class="line">        [contactsArray sortUsingComparator:^<span class="built_in">NSComparisonResult</span>(HHBContactModel *obj1, HHBContactModel *obj2) &#123;</div><div class="line">            <span class="keyword">return</span> [obj1.name.pinyinString compare:obj2.name.pinyinString];</div><div class="line">        &#125;];</div><div class="line">        categoryModel.contactsArray = contactsArray.copy;</div><div class="line">        [modelArray addObject:categoryModel];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> modelArray.copy;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - è·å–å½“å‰è®¾å¤‡çš„è”ç³»äººé›†åˆæ•°æ®(å·²åˆ†ç±»æ’åº)</span></div><div class="line">+ (<span class="built_in">NSArray</span> &lt;HHBContactCategoryModel *&gt; *)getContactsCategoryModel &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> contactsCategoryModesWithArray:[HHBGetContact getAllcontactsOfPhone].copy];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>è‡³æ­¤ç»„è£…æ¨¡å‹æ•°æ®å·²ç®€å•å®Œæˆï¼Œå°†æ‹¿åˆ°çš„æ•°æ®è°ƒç”¨æ­¤æ–¹æ³•å°±å¯ä»¥è·å¾—æœ€ç»ˆå·²å¤„ç†å¥½çš„æ¨¡å‹æ•°æ®<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *dataArray = [HHBContactCategoryModel getContactsCategoryModel];</div></pre></td></tr></table></figure></p>
<p>dataArrayæ•°æ®å°±æ˜¯æ¯ç»„åˆ†ç±»æ’åºå¥½çš„æ•°æ®ã€‚</p>
<p>æˆ‘è¿™é‡Œç®€å•å†™äº†ä¸ªå°demo,ä¸è¶³ä¹‹å¤„æ¬¢è¿å¤§å®¶æŒ‡æ­£ï¼š<a href="https://github.com/huhanze/HBGetContact" target="_blank" rel="external"><em><font color="ff0079">demoåœ°å€</font></em></a></p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://yoursite.com/2015/10/13/technology/è·å–è®¾å¤‡é€šè®¯å½•-iOS/" data-id="cjhij0kyn000xe3ynkerbuw1e" class="article-share-link"><i class="fa fa-share"></i>åˆ†äº«åˆ°</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>å…³æ³¨æˆ‘ :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="/" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/05/16/others/èšèŒƒç¤¾åŒºæ–‡æ¡£/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <p class="article-nav-title">
        
            èšèŒƒç¤¾åŒºæ–‡æ¡£
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2015/03/21/technology/UIæ§ä»¶åŒæ—¶è®¾ç½®é˜´å½±å’Œåœ†è§’/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <p class="article-nav-title">UIæ§ä»¶åŒæ—¶è®¾ç½®é˜´å½±å’Œåœ†è§’</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/05/23/technology/iOSå¼€å‘ä¸­å¸¸è§çš„å®/" class="thumbnail">
    
    
        <span style="background-image:url(/images/logo/logo_tech_06.jpg)" alt="iOSå¼€å‘ä¸­å¸¸è§çš„å®" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/technology/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2018/05/23/technology/iOSå¼€å‘ä¸­å¸¸è§çš„å®/" class="title">iOSå¼€å‘ä¸­å¸¸è§çš„å®</a></p>
                            <p class="item-date"><time datetime="2018-05-23T02:11:58.000Z" itemprop="datePublished">2018-05-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/01/31/technology/Pythonå¤šè¿›ç¨‹åŸºæœ¬æ“ä½œ/" class="thumbnail">
    
    
        <span style="background-image:url(/images/logo/logo_tech_11.jpg)" alt="Pythonè¿›ç¨‹å’Œçº¿ç¨‹çš„åŸºæœ¬æ“ä½œ" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/technology/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2018/01/31/technology/Pythonå¤šè¿›ç¨‹åŸºæœ¬æ“ä½œ/" class="title">Pythonè¿›ç¨‹å’Œçº¿ç¨‹çš„åŸºæœ¬æ“ä½œ</a></p>
                            <p class="item-date"><time datetime="2018-01-31T01:30:31.000Z" itemprop="datePublished">2018-01-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/01/30/technology/è§£å†³Pythonç¼–ç¨‹è›‹ç–¼çš„ç¼©è¿›é—®é¢˜æŠ¥é”™/" class="thumbnail">
    
    
        <span style="background-image:url(/images/logo/logo_tech_3.jpg)" alt="è§£å†³Pythonç¼–ç¨‹è›‹ç–¼çš„ç¼©è¿›é—®é¢˜æŠ¥é”™" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/technology/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2018/01/30/technology/è§£å†³Pythonç¼–ç¨‹è›‹ç–¼çš„ç¼©è¿›é—®é¢˜æŠ¥é”™/" class="title">è§£å†³Pythonç¼–ç¨‹è›‹ç–¼çš„ç¼©è¿›é—®é¢˜æŠ¥é”™</a></p>
                            <p class="item-date"><time datetime="2018-01-30T02:55:03.000Z" itemprop="datePublished">2018-01-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/01/19/technology/é€šè¿‡Contacts.Frameworkè·å–è®¾å¤‡é€šè®¯å½•(iOS9.0ä»¥å)/" class="thumbnail">
    
    
        <span style="background-image:url(/images/logo/logo_tech_7.jpg)" alt="é€šè¿‡Contacts.Frameworkè·å–è®¾å¤‡é€šè®¯å½•(iOS9.0ä»¥å)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/technology/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2018/01/19/technology/é€šè¿‡Contacts.Frameworkè·å–è®¾å¤‡é€šè®¯å½•(iOS9.0ä»¥å)/" class="title">é€šè¿‡Contacts.Frameworkè·å–è®¾å¤‡é€šè®¯å½•(iOS9.0ä»¥å)</a></p>
                            <p class="item-date"><time datetime="2018-01-19T03:13:12.000Z" itemprop="datePublished">2018-01-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/26/technology/Xcodeä¸­å¼•å…¥cocos2d-x/" class="thumbnail">
    
    
        <span style="background-image:url(/images/logo/logo_tech_8.jpg)" alt="Xcodeä¸­å¼•å…¥cocos2d-x" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/technology/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2017/08/26/technology/Xcodeä¸­å¼•å…¥cocos2d-x/" class="title">Xcodeä¸­å¼•å…¥cocos2d-x</a></p>
                            <p class="item-date"><time datetime="2017-08-26T06:56:31.000Z" itemprop="datePublished">2017-08-26</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">åˆ†ç±»</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/others/">å…¶ä»–</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/technology/">æŠ€æœ¯</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">ç”Ÿæ´»</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">å½’æ¡£</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">ä¸€æœˆ 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">å…«æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">äº”æœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">åæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">ä¸‰æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">å…­æœˆ 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">äº”æœˆ 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">ä¹æœˆ 2012</a><span class="archive-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">æ ‡ç­¾</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cè¯­è¨€/">Cè¯­è¨€</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocos2d/">cocos2d</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/äºŒå‰æ ‘/">äºŒå‰æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å›¾/">å›¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/èšèŒƒ/">èšèŒƒ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é“¾è¡¨/">é“¾è¡¨</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
        <div class="widget tagcloud">
            <a href="/tags/C/" style="font-size: 12.5px;">C++</a> <a href="/tags/Cè¯­è¨€/" style="font-size: 20px;">Cè¯­è¨€</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/cocos2d/" style="font-size: 10px;">cocos2d</a> <a href="/tags/iOS/" style="font-size: 17.5px;">iOS</a> <a href="/tags/äºŒå‰æ ‘/" style="font-size: 10px;">äºŒå‰æ ‘</a> <a href="/tags/å›¾/" style="font-size: 10px;">å›¾</a> <a href="/tags/æ•°æ®ç»“æ„/" style="font-size: 12.5px;">æ•°æ®ç»“æ„</a> <a href="/tags/ç®—æ³•/" style="font-size: 17.5px;">ç®—æ³•</a> <a href="/tags/èšèŒƒ/" style="font-size: 10px;">èšèŒƒ</a> <a href="/tags/é“¾è¡¨/" style="font-size: 15px;">é“¾è¡¨</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">é“¾æ¥</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2018 Dylan.Hu&#39;Memory</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://yoursite.com/2015/10/13/technology/è·å–è®¾å¤‡é€šè®¯å½•-iOS/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
